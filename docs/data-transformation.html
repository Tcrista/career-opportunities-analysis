<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Data Career Opportunities Analysis</title>
  <meta name="description" content="Chapter 3 Data transformation | Data Career Opportunities Analysis" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Data Career Opportunities Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Data Career Opportunities Analysis" />
  
  
  

<meta name="author" content="Mutian Wang, Xinyuan He, Weitao Chen, Jianing Li" />


<meta name="date" content="2019-12-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.49.4/plotly-latest.min.js"></script>
<link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet" />
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script>
<script src="libs/d3-5.10.0/d3.min.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Data Jobs Analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#background"><i class="fa fa-check"></i><b>1.1</b> Background</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#motivation"><i class="fa fa-check"></i><b>1.2</b> Motivation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a><ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#glassdoor"><i class="fa fa-check"></i><b>2.1</b> Glassdoor</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#indeed"><i class="fa fa-check"></i><b>2.2</b> Indeed</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#city-data"><i class="fa fa-check"></i><b>2.3</b> City data</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-sources.html"><a href="data-sources.html#median-income"><i class="fa fa-check"></i><b>2.3.1</b> <span>2018 median income</span></a></li>
<li class="chapter" data-level="2.3.2" data-path="data-sources.html"><a href="data-sources.html#population"><i class="fa fa-check"></i><b>2.3.2</b> <span>Population</span></a></li>
<li class="chapter" data-level="2.3.3" data-path="data-sources.html"><a href="data-sources.html#violent-crime"><i class="fa fa-check"></i><b>2.3.3</b> <span>Violent crime</span></a></li>
<li class="chapter" data-level="2.3.4" data-path="data-sources.html"><a href="data-sources.html#cpi"><i class="fa fa-check"></i><b>2.3.4</b> <span>CPI</span></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#glassdoor-1"><i class="fa fa-check"></i><b>3.1</b> Glassdoor</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#indeed-1"><i class="fa fa-check"></i><b>3.2</b> Indeed</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#city-data-1"><i class="fa fa-check"></i><b>3.3</b> City data</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a><ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#glassdoor-2"><i class="fa fa-check"></i><b>4.1</b> Glassdoor</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#indeed-2"><i class="fa fa-check"></i><b>4.2</b> Indeed</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#city-data-2"><i class="fa fa-check"></i><b>4.3</b> City data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a><ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#us-labor-market-data-related-jobs-vs.others"><i class="fa fa-check"></i><b>5.1</b> US labor market: Data related jobs vs.Â others</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#trends-of-data-related-jobs"><i class="fa fa-check"></i><b>5.2</b> Trends of data related jobs</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#geographical-patterns-of-data-related-jobs"><i class="fa fa-check"></i><b>5.3</b> Geographical patterns of data related jobs</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#best-cities-for-data-related-jobs"><i class="fa fa-check"></i><b>5.4</b> Best cities for data related jobs</a><ul>
<li class="chapter" data-level="5.4.1" data-path="results.html"><a href="results.html#data-scientist-job-statistics-in-10-different-cities"><i class="fa fa-check"></i><b>5.4.1</b> Data Scientist job statistics in 10 different cities</a></li>
<li class="chapter" data-level="5.4.2" data-path="results.html"><a href="results.html#correlation-between-city-features"><i class="fa fa-check"></i><b>5.4.2</b> Correlation between city features</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="results.html"><a href="results.html#what-are-the-most-relevant-to-data-related-jobs"><i class="fa fa-check"></i><b>5.5</b> What are the most relevant to data related jobs?</a><ul>
<li class="chapter" data-level="5.5.1" data-path="results.html"><a href="results.html#data-scientist-vs-data-analyst"><i class="fa fa-check"></i><b>5.5.1</b> Data Scientist vs Data Analyst</a></li>
<li class="chapter" data-level="5.5.2" data-path="results.html"><a href="results.html#business-analyst-vs-financial-analyst"><i class="fa fa-check"></i><b>5.5.2</b> Business Analyst vs Financial Analyst</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a><ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#overview"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion.html"><a href="conclusion.html#limitations-and-future-work"><i class="fa fa-check"></i><b>7.2</b> Limitations and future work</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Career Opportunities Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<p><img src="https://raw.githubusercontent.com/lijning/career-opportunities-analysis/master/others/resource/33.png" /></p>
<div id="glassdoor-1" class="section level2">
<h2><span class="header-section-number">3.1</span> Glassdoor</h2>
<ol style="list-style-type: decimal">
<li><p>The raw dataset is monthly. In order to explore the temporal changes of median base pay, we first concatenated the 22 datasets into a single data frame.</p></li>
<li><p>Since national data and city level data are on different levels, we separated the dataset into two main categories: national level and city levels.</p></li>
<li><p>The next step is to construct the datasets containing only the variables we are interested in, which are for futher analysis. Here are a few examples:</p></li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>In order to focus on the relationship between job title and median base pay, we subsetted the corresponding dataset:</li>
</ol>
<pre><code>## # A tibble: 6 x 8
##      X1 Metro  Dimension.Type Month  Dimension       Measure   Value  YoY  
##   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;
## 1   127 Atlanâ¦ Job Title      2019-â¦ Accountant      Median Bâ¦ $58,6â¦ 2.20%
## 2   128 Atlanâ¦ Job Title      2019-â¦ Administrativeâ¦ Median Bâ¦ $43,2â¦ 1.90%
## 3   129 Atlanâ¦ Job Title      2019-â¦ Attorney        Median Bâ¦ $105,â¦ -2.2â¦
## 4   130 Atlanâ¦ Job Title      2019-â¦ Bank Teller     Median Bâ¦ $33,2â¦ 6.70%
## 5   131 Atlanâ¦ Job Title      2019-â¦ Barista         Median Bâ¦ $23,6â¦ 3.90%
## 6   132 Atlanâ¦ Job Title      2019-â¦ Bartender       Median Bâ¦ $36,8â¦ 14.1â¦</code></pre>
<ol start="2" style="list-style-type: lower-alpha">
<li>In order to find out the secular and cyclical trend of median base pay, we subsetted the corresponding dataset:</li>
</ol>
<pre><code>## # A tibble: 6 x 8
##      X1 Metro Dimension.Type Month  Dimension       Measure     Value YoY  
##   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;           &lt;chr&gt;       &lt;dbl&gt; &lt;lgl&gt;
## 1  1440 U.S.  Timeseries     2019-â¦ Metro Median Bâ¦ Median Baâ¦ 54327. NA   
## 2  1441 U.S.  Timeseries     2019-â¦ Metro Median Bâ¦ Median Baâ¦ 54175. NA   
## 3  1442 U.S.  Timeseries     2019-â¦ Metro Median Bâ¦ Median Baâ¦ 54023. NA   
## 4  1443 U.S.  Timeseries     2019-â¦ Metro Median Bâ¦ Median Baâ¦ 53860. NA   
## 5  1444 U.S.  Timeseries     2019-â¦ Metro Median Bâ¦ Median Baâ¦ 53647  NA   
## 6  1445 U.S.  Timeseries     2019-â¦ Metro Median Bâ¦ Median Baâ¦ 53525  NA</code></pre>
<p>We did the subsetting for all possible dimensions and got 10 separate datasets in total: na_industry, na_jobtitle, na_size, na_ts_opening, na_ts_pay, city_industry, city_jobtitle, city_size and city_ts. As for the filenames, na stands for national; ts stands for timeseries; size stands for company size; opening stands for job opening; pay stands for median base pay.</p>
<p>Here is a graph indicates the structure of the cleaning process</p>
<p><img src="https://raw.githubusercontent.com/lijning/career-opportunities-analysis/master/others/resource/Screen%20Shot%202019-12-12%20at%203.26.12%20PM.png" /></p>
</div>
<div id="indeed-1" class="section level2">
<h2><span class="header-section-number">3.2</span> Indeed</h2>
<p>We used Indeed dataset in two parts of the analysis and conducted the data cleaning process differently based on different needs:</p>
<ol style="list-style-type: decimal">
<li>To find out the regional distribution pattern of the four data related jobs we are interested in: data analyst, data scientist, business analyst and financial analyst, we scraped all the search results from indeed using the four job titles, then grouped the jobs by state and finally counted their numbers.</li>
</ol>
<pre><code>## # A tibble: 6 x 7
##      X1 state jo_ba jo_da jo_ds jo_fa jo_total
##   &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1     1 AL        6     2    11    16       35
## 2     2 AR        6    12     4     6       28
## 3     3 AZ      131    20    14    19      184
## 4     4 CA      223   177   298   242      940
## 5     5 CO       48    38    64    41      191
## 6     6 CT       23   107    13    13      156</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>We need to plot wordclouds to help us analyze. In python, we vectorized the details by 1-gram and 2-gram, removing common English stopwords and some less informative words. Then we combined 1-gram and 2-gram into one list. The final result is in the form of word vs.Â frequency.</li>
</ol>
</div>
<div id="city-data-1" class="section level2">
<h2><span class="header-section-number">3.3</span> City data</h2>
<p>The goal of the data cleaning is to map city statistics to 10 cities.</p>
<p>The median income column should be numeric, but they are characters with dollar signs and commas. Thus we removed the dollar signs and commas, and then convert them to numeric forms.</p>
<p>Firstly we used two for loops to map the city statistics into cities. However, the city names in each dataset are different, which led to some mismatches. To fix it, we assigned the values manually.</p>
<p>There is no value of all_median_income in Atlanta in 2018. In order to draw the parallel coordinates plot, we found this value from somewhere else.</p>
<p>To find the patterns in different cities, I standardized the data before drawing the parallel coordinates plot.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/lijning/career-opportunities-analysis/edit/master/analysis-bookdown/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/lijning/career-opportunities-analysis/blob/master/analysis-bookdown/03-cleaning.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
